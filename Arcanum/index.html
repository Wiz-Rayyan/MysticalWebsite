<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Mysteries - Secret Societies</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Tangerine:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gold: #d4af37;
            --dark-gold: #b8941f;
            --deep-black: #0a0a0a;
            --charcoal: #1a1a1a;
            --dark-gray: #2a2a2a;
            --blood-red: #8b0000;
            --mystic-purple: #4a0e4e;
            --shadow-color: rgba(212, 175, 55, 0.3);
            --electric-blue: #1e3a8a;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, var(--deep-black) 0%, var(--charcoal) 50%, var(--mystic-purple) 100%);
            color: #e0e0e0;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Enhanced mystical background with moving elements */
        .mystical-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .constellation {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--primary-gold);
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle 3s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        .energy-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-gold), transparent);
            animation: energyFlow 8s infinite linear;
            opacity: 0.4;
        }

        @keyframes energyFlow {
            0% { transform: translateX(-100vw); }
            100% { transform: translateX(100vw); }
        }

        /* Navigation with enhanced effects */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(15px);
            z-index: 1000;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--primary-gold);
            text-decoration: none;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: #c0c0c0;
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary-gold);
            text-shadow: 0 0 10px var(--shadow-color);
        }

        /* Main hero section with interactive elements */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            z-index: 2;
        }

        .main-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            color: var(--primary-gold);
            text-shadow: 0 0 30px var(--shadow-color);
            margin-bottom: 2rem;
            animation: titleGlow 4s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { text-shadow: 0 0 30px var(--shadow-color); }
            50% { text-shadow: 0 0 50px var(--shadow-color), 0 0 70px var(--shadow-color); }
        }

        .interactive-orb {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(212, 175, 55, 0.8), rgba(212, 175, 55, 0.3), transparent);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: orbPulse 6s ease-in-out infinite;
        }

        @keyframes orbPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(212, 175, 55, 0.5); }
            50% { transform: scale(1.1); box-shadow: 0 0 60px rgba(212, 175, 55, 0.8); }
        }

        .interactive-orb:hover {
            transform: scale(1.2) !important;
            animation-play-state: paused;
        }

        .orb-symbol {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: var(--primary-gold);
            animation: symbolRotate 20s linear infinite;
        }

        @keyframes symbolRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Interactive cipher wheel */
        .cipher-section {
            padding: 6rem 2rem;
            text-align: center;
        }

        .cipher-wheel {
            width: 300px;
            height: 300px;
            margin: 3rem auto;
            position: relative;
            cursor: pointer;
        }

        .wheel-outer, .wheel-inner {
            position: absolute;
            border-radius: 50%;
            border: 3px solid var(--primary-gold);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel-outer {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(26, 26, 26, 0.9), rgba(42, 42, 42, 0.7));
            animation: wheelRotate 30s linear infinite;
        }

        .wheel-inner {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.2), transparent);
            animation: wheelRotate 20s linear infinite reverse;
        }

        @keyframes wheelRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .cipher-letters {
            position: absolute;
            width: 100%;
            height: 100%;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            color: var(--primary-gold);
        }

        .cipher-letter {
            position: absolute;
            font-size: 1.2rem;
            transform-origin: center;
        }

        /* Symbol decoder */
        .decoder-section {
            padding: 4rem 2rem;
            background: rgba(26, 26, 26, 0.5);
            margin: 4rem 0;
        }

        .symbol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 2rem;
            max-width: 800px;
            margin: 3rem auto;
        }

        .symbol-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, rgba(42, 42, 42, 0.8), rgba(26, 26, 26, 0.9));
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .symbol-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(var(--primary-gold), transparent, var(--primary-gold));
            animation: symbolSpin 4s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .symbol-card:hover::before {
            opacity: 0.3;
        }

        @keyframes symbolSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .symbol-card:hover {
            transform: scale(1.1);
            border-color: var(--primary-gold);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4);
        }

        .symbol-card.decoded {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3), rgba(184, 148, 31, 0.3));
            animation: decodePulse 1s ease-in-out;
        }

        @keyframes decodePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Ancient text revealer */
        .text-revealer {
            padding: 4rem 2rem;
            text-align: center;
        }

        .ancient-text {
            font-family: 'Tangerine', cursive;
            font-size: 2.5rem;
            line-height: 1.6;
            color: var(--primary-gold);
            max-width: 800px;
            margin: 2rem auto;
            position: relative;
            cursor: pointer;
        }

        .text-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(10, 10, 10, 0.9) 20%, 
                rgba(10, 10, 10, 0.9) 80%, 
                transparent 100%);
            transition: opacity 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
        }

        .text-overlay.hidden {
            opacity: 0;
        }

        /* Mystical calculator */
        .calculator-section {
            padding: 4rem 2rem;
            background: rgba(42, 42, 42, 0.3);
        }

        .numerology-calc {
            max-width: 600px;
            margin: 0 auto;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9), rgba(42, 42, 42, 0.7));
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
        }

        .calc-input {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            background: rgba(10, 10, 10, 0.8);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            color: var(--primary-gold);
            font-family: 'Crimson Text', serif;
            text-align: center;
            margin: 1rem 0;
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--primary-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .calc-result {
            font-size: 3rem;
            color: var(--primary-gold);
            font-family: 'Cinzel', serif;
            margin: 2rem 0;
            min-height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .calc-button {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            color: var(--deep-black);
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 1rem;
        }

        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.4);
        }

        /* Section titles */
        .section-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-gold), transparent);
        }

        /* Particle system */
        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--primary-gold);
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 6s linear infinite;
        }

        @keyframes particleFloat {
            0% {
                opacity: 0;
                transform: translateY(100vh) scale(0);
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) scale(1);
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(0) scale(0);
            }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .cipher-wheel {
                width: 250px;
                height: 250px;
            }
            
            .symbol-grid {
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            }
            
            .numerology-calc {
                padding: 2rem 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced mystical background -->
    <div class="mystical-bg" id="mysticalBg">
        <!-- Dynamic constellation and energy lines will be added by JavaScript -->
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="#" class="logo">⚹ ARCANUM ⚹</a>
            <div class="nav-links">
                <a href="#home" class="nav-link">Portal</a>
                <a href="#cipher" class="nav-link">Cipher</a>
                <a href="#decoder" class="nav-link">Decoder</a>
                <a href="#numerology" class="nav-link">Numbers</a>
                <a href="#revelations" class="nav-link">Revelations</a>
                <a href="secretsociety.html" class="nav-link"> Secret Societies </a> 
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1 class="main-title">INTERACTIVE MYSTERIES</h1>
            <p style="font-size: 1.3rem; margin-bottom: 2rem; max-width: 600px;">
                Unlock the secrets through interactive experience. Decode ancient symbols, reveal hidden texts, and calculate mystical numbers.
            </p>
            
            <div class="interactive-orb" id="mysticalOrb">
                <div class="orb-symbol">⚹</div>
            </div>
            
            <p style="font-style: italic; opacity: 0.8;">Click the orb to begin your journey...</p>
        </div>
    </section>

    <!-- Cipher Wheel Section -->
    <section class="cipher-section" id="cipher">
        <h2 class="section-title">The Cipher of Solomon</h2>
        <p style="text-align: center; font-size: 1.2rem; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto;">
            Ancient wisdom encoded in rotating wheels. Click to stop the wheels and reveal the hidden message.
        </p>
        
        <div class="cipher-wheel" id="cipherWheel">
            <div class="wheel-outer">
                <div class="cipher-letters" id="outerLetters"></div>
            </div>
            <div class="wheel-inner">
                <div class="cipher-letters" id="innerLetters"></div>
            </div>
        </div>
        
        <div id="cipherMessage" style="font-size: 1.5rem; color: var(--primary-gold); margin-top: 2rem; min-height: 2rem; font-family: 'Cinzel', serif;"></div>
    </section>

    <!-- Symbol Decoder Section -->
    <section class="decoder-section" id="decoder">
        <h2 class="section-title">Hermetic Symbol Decoder</h2>
        <p style="text-align: center; font-size: 1.2rem; margin-bottom: 2rem;">
            Click the symbols in the correct order to unlock the ancient message.
        </p>
        
        <div class="symbol-grid" id="symbolGrid">
            <!-- Symbols will be populated by JavaScript -->
        </div>
        
        <div id="decoderMessage" style="text-align: center; font-size: 1.3rem; color: var(--primary-gold); margin-top: 2rem; font-family: 'Cinzel', serif;"></div>
        <button id="resetDecoder" class="calc-button" style="display: none;">Reset Decoder</button>
    </section>

    <!-- Ancient Text Revealer -->
    <section class="text-revealer" id="revelations">
        <h2 class="section-title">Forbidden Revelations</h2>
        <p style="font-size: 1.2rem; margin-bottom: 2rem;">
            Hover over the encrypted text to reveal the hidden wisdom of the ancients.
        </p>
        
        <div class="ancient-text" id="ancientText">
            <div class="text-overlay" id="textOverlay">
                <span>✧ Encrypted Wisdom ✧ Hover to Reveal ✧</span>
            </div>
            "As above, so below. The microcosm mirrors the macrocosm. 
            In the union of opposites lies the key to transformation. 
            Seek not in the external world what can only be found within. 
            The philosopher's stone is not of this realm, but of the soul."
        </div>
    </section>

    <!-- Numerology Calculator -->
    <section class="calculator-section" id="numerology">
        <h2 class="section-title">Sacred Numerology</h2>
        <div class="numerology-calc">
            <p style="font-size: 1.2rem; margin-bottom: 2rem;">
                Enter your name to discover your mystical number and its hidden meaning.
            </p>
            
            <input type="text" id="nameInput" class="calc-input" placeholder="Enter your full name..." maxlength="50">
            <button id="calculateBtn" class="calc-button">Calculate Sacred Number</button>
            
            <div id="calcResult" class="calc-result"></div>
            <div id="numberMeaning" style="font-size: 1.1rem; line-height: 1.6; margin-top: 1rem;"></div>
        </div>
    </section>

    <script>
        // Initialize mystical background
        function createMysticalBackground() {
            const bg = document.getElementById('mysticalBg');
            
            // Create constellation stars
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'constellation';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                bg.appendChild(star);
            }
            
            // Create energy lines
            for (let i = 0; i < 5; i++) {
                const line = document.createElement('div');
                line.className = 'energy-line';
                line.style.top = Math.random() * 100 + '%';
                line.style.width = Math.random() * 300 + 100 + 'px';
                line.style.animationDelay = i * 2 + 's';
                bg.appendChild(line);
            }
        }

        // Interactive orb functionality
        const mysticalOrb = document.getElementById('mysticalOrb');
        let orbClicks = 0;
        const orbSymbols = ['⚹', '◊', '☩', '△', '☥', '⚚', '👁', '🜔'];
        
        mysticalOrb.addEventListener('click', function() {
            orbClicks++;
            const orbSymbol = this.querySelector('.orb-symbol');
            orbSymbol.textContent = orbSymbols[orbClicks % orbSymbols.length];
            
            // Create particle explosion
            createParticleExplosion(this);
            
            // Change orb color temporarily
            this.style.background = `radial-gradient(circle at 30% 30%, rgba(${Math.random()*255}, ${Math.random()*255}, 212, 0.8), rgba(212, 175, 55, 0.3), transparent)`;
            
            setTimeout(() => {
                this.style.background = 'radial-gradient(circle at 30% 30%, rgba(212, 175, 55, 0.8), rgba(212, 175, 55, 0.3), transparent)';
            }, 1000);
        });

        // Cipher wheel functionality
        function initializeCipherWheel() {
            const outerLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const innerLetters = 'ZYXWVUTSRQPONMLKJIHGFEDCBA';
            const outerDiv = document.getElementById('outerLetters');
            const innerDiv = document.getElementById('innerLetters');
            
            // Create outer wheel letters
            for (let i = 0; i < outerLetters.length; i++) {
                const letter = document.createElement('div');
                letter.className = 'cipher-letter';
                letter.textContent = outerLetters[i];
                const angle = (i * 360) / outerLetters.length;
                letter.style.transform = `rotate(${angle}deg) translateY(-120px) rotate(-${angle}deg)`;
                outerDiv.appendChild(letter);
            }
            
            // Create inner wheel letters
            for (let i = 0; i < innerLetters.length; i++) {
                const letter = document.createElement('div');
                letter.className = 'cipher-letter';
                letter.textContent = innerLetters[i];
                const angle = (i * 360) / innerLetters.length;
                letter.style.transform = `rotate(${angle}deg) translateY(-60px) rotate(-${angle}deg)`;
                innerDiv.appendChild(letter);
            }
        }

        const cipherWheel = document.getElementById('cipherWheel');
        const cipherMessages = [
            "KNOWLEDGE IS POWER",
            "TRUTH LIES WITHIN",
            "SEEK THE LIGHT",
            "WISDOM AWAITS",
            "THE KEY IS HIDDEN"
        ];
        let cipherIndex = 0;

        cipherWheel.addEventListener('click', function() {
            // Stop wheel animation temporarily
            const outerWheel = this.querySelector('.wheel-outer');
            const innerWheel = this.querySelector('.wheel-inner');
            
            outerWheel.style.animationPlayState = 'paused';
            innerWheel.style.animationPlayState = 'paused';
            
            // Show message
            document.getElementById('cipherMessage').textContent = cipherMessages[cipherIndex % cipherMessages.length];
            cipherIndex++;
            
            // Resume animation after 3 seconds
            setTimeout(() => {
                outerWheel.style.animationPlayState = 'running';
                innerWheel.style.animationPlayState = 'running';
                document.getElementById('cipherMessage').textContent = '';
            }, 3000);
        });

        // Symbol decoder functionality
        const symbols = ['△', '◊', '☩', '⚹', '☥', '⚚', '👁', '🜔', '♦', '✠', '⚡', '🔯'];
        const correctSequence = [0, 3, 6, 9]; // Indices of correct symbols
        let selectedSymbols = [];

        function initializeSymbolDecoder() {
            const grid = document.getElementById('symbolGrid');
            
            symbols.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'symbol-card';
                card.textContent = symbol;
                card.dataset.index = index;
                
                card.addEventListener('click', function() {
                    if (this.classList.contains('decoded')) return;
                    
                    selectedSymbols.push(parseInt(this.dataset.index));
                    this.classList.add('decoded');
                    
                    if (selectedSymbols.length === correctSequence.length) {
                        checkDecoderSequence();
                    }
                });
                
                grid.appendChild(card);
            });
        }

        function checkDecoderSequence() {
            const isCorrect = selectedSymbols.every((val, index) => val === correctSequence[index]);
            const messageDiv = document.getElementById('decoderMessage');
            const resetBtn = document.getElementById('resetDecoder');
            
            if (isCorrect) {
                messageDiv.textContent = "✧ THE VEIL IS LIFTED - ANCIENT WISDOM FLOWS THROUGH YOU ✧";
                messageDiv.style.color = 'var(--primary-gold)';
                createGlobalParticleEffect();
            } else {
                messageDiv.textContent = "The sequence is incorrect. The mysteries remain hidden.";
                messageDiv.style.color = 'var(--blood-red)';
            }
            
            resetBtn.style.display = 'inline-block';
        }

        document.getElementById('resetDecoder').addEventListener('click', function() {
            selectedSymbols = [];
            document.querySelectorAll('.symbol-card').forEach(card => {
                card.classList.remove('decoded');
            });
            document.getElementById('decoderMessage').textContent = '';
            this.style.display = 'none';
        });

        // Ancient text revealer
        const ancientText = document.getElementById('ancientText');
        const textOverlay = document.getElementById('textOverlay');

        ancientText.addEventListener('mouseenter', function() {
            textOverlay.classList.add('hidden');
        });

        ancientText.addEventListener('mouseleave', function() {
            textOverlay.classList.remove('hidden');
        });

        // Numerology calculator
        const numerologyMeanings = {
            1: "The Leader - You possess natural leadership abilities and pioneering spirit. Your path involves independence and innovation.",
            2: "The Diplomat - You are a natural peacemaker with strong intuitive abilities. Cooperation and harmony guide your journey.",
            3: "The Creative - Artistic expression and communication are your gifts. You inspire others through creativity and joy.",
            4: "The Builder - Stability, hard work, and methodical approach define you. You create lasting foundations for others.",
            5: "The Explorer - Freedom, adventure, and change drive you. You seek experience and knowledge through variety.",
            6: "The Nurturer - Compassion and service to others are your calling. You heal and support those around you.",
            7: "The Mystic - Spiritual seeking and deep wisdom mark your path. You uncover hidden truths and ancient knowledge.",
            8: "The Achiever - Material success and power are within your grasp. You understand the laws of manifestation.",
            9: "The Humanitarian - Universal love and service to humanity define your purpose. You work for the greater good."
        };

        document.getElementById('calculateBtn').addEventListener('click', function() {
            const name = document.getElementById('nameInput').value.trim().toUpperCase();
            if (!name) return;
            
            let total = 0;
            for (let char of name) {
                if (char >= 'A' && char <= 'Z') {
                    total += char.charCodeAt(0) - 64;
                }
            }
            
            // Reduce to single digit (except master numbers 11, 22, 33)
            while (total > 9 && total !== 11 && total !== 22 && total !== 33) {
                total = total.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
            }
            
            const resultDiv = document.getElementById('calcResult');
            const meaningDiv = document.getElementById('numberMeaning');
            
            resultDiv.textContent = total;
            meaningDiv.textContent = numerologyMeanings[total] || "A master number with extraordinary potential and responsibility.";
            
            // Animate result
            resultDiv.style.animation = 'none';
            setTimeout(() => {
                resultDiv.style.animation = 'decodePulse 2s ease-in-out';
            }, 10);
            
            createMysticalEffectAround(resultDiv);
        });

        // Particle effects
        function createParticleExplosion(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                particle.style.width = '4px';
                particle.style.height = '4px';
                particle.style.background = 'var(--primary-gold)';
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '9999';
                
                const angle = (i / 15) * Math.PI * 2;
                const velocity = 2 + Math.random() * 3;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                document.body.appendChild(particle);
                
                let posX = 0, posY = 0, opacity = 1;
                const animate = () => {
                    posX += vx;
                    posY += vy;
                    opacity -= 0.02;
                    
                    particle.style.transform = `translate(${posX}px, ${posY}px)`;
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        document.body.removeChild(particle);
                    }
                };
                
                requestAnimationFrame(animate);
            }
        }

        function createGlobalParticleEffect() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particle.style.animationDuration = (4 + Math.random() * 4) + 's';
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        if (document.body.contains(particle)) {
                            document.body.removeChild(particle);
                        }
                    }, 8000);
                }, i * 100);
            }
        }

        function createMysticalEffectAround(element) {
            const rect = element.getBoundingClientRect();
            const symbols = ['✧', '⚹', '◊', '△'];
            
            for (let i = 0; i < 8; i++) {
                const mysticalSymbol = document.createElement('div');
                mysticalSymbol.textContent = symbols[i % symbols.length];
                mysticalSymbol.style.position = 'fixed';
                mysticalSymbol.style.color = 'var(--primary-gold)';
                mysticalSymbol.style.fontSize = '1.5rem';
                mysticalSymbol.style.pointerEvents = 'none';
                mysticalSymbol.style.zIndex = '9999';
                
                const radius = 100;
                const angle = (i / 8) * Math.PI * 2;
                const startX = rect.left + rect.width / 2 + Math.cos(angle) * radius;
                const startY = rect.top + rect.height / 2 + Math.sin(angle) * radius;
                
                mysticalSymbol.style.left = startX + 'px';
                mysticalSymbol.style.top = startY + 'px';
                
                document.body.appendChild(mysticalSymbol);
                
                let rotation = 0;
                let opacity = 1;
                let scale = 1;
                
                const animate = () => {
                    rotation += 5;
                    opacity -= 0.015;
                    scale += 0.02;
                    
                    const currentRadius = radius + (rotation * 2);
                    const x = rect.left + rect.width / 2 + Math.cos(angle + rotation * 0.05) * currentRadius;
                    const y = rect.top + rect.height / 2 + Math.sin(angle + rotation * 0.05) * currentRadius;
                    
                    mysticalSymbol.style.left = x + 'px';
                    mysticalSymbol.style.top = y + 'px';
                    mysticalSymbol.style.transform = `rotate(${rotation}deg) scale(${scale})`;
                    mysticalSymbol.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        if (document.body.contains(mysticalSymbol)) {
                            document.body.removeChild(mysticalSymbol);
                        }
                    }
                };
                
                setTimeout(() => requestAnimationFrame(animate), i * 200);
            }
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Enhanced mouse trail effect
        let mouseTrail = [];
        document.addEventListener('mousemove', (e) => {
            mouseTrail.push({ x: e.clientX, y: e.clientY, time: Date.now() });
            
            if (mouseTrail.length > 20) {
                mouseTrail.shift();
            }
            
            if (Math.random() > 0.92) {
                const trail = document.createElement('div');
                trail.style.position = 'fixed';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                trail.style.width = '3px';
                trail.style.height = '3px';
                trail.style.background = 'var(--primary-gold)';
                trail.style.borderRadius = '50%';
                trail.style.pointerEvents = 'none';
                trail.style.zIndex = '999';
                trail.style.animation = 'trailFade 2s ease-out forwards';
                
                document.body.appendChild(trail);
                
                setTimeout(() => {
                    if (document.body.contains(trail)) {
                        document.body.removeChild(trail);
                    }
                }, 2000);
            }
        });

        // Add trail fade animation
        const trailStyle = document.createElement('style');
        trailStyle.textContent = `
            @keyframes trailFade {
                0% { opacity: 0.8; transform: scale(1); }
                100% { opacity: 0; transform: scale(0.3) translateY(-20px); }
            }
        `;
        document.head.appendChild(trailStyle);

        // Ambient sound trigger (visual feedback only)
        let ambientActive = false;
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ' && !ambientActive) {
                ambientActive = true;
                document.body.style.filter = 'hue-rotate(45deg)';
                
                setTimeout(() => {
                    document.body.style.filter = 'none';
                    ambientActive = false;
                }, 2000);
            }
        });

        // Konami code easter egg
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
        
        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.code);
            if (konamiCode.length > konamiSequence.length) {
                konamiCode.shift();
            }
            
            if (konamiCode.length === konamiSequence.length && 
                konamiCode.every((key, index) => key === konamiSequence[index])) {
                
                // Ultimate mystical effect
                document.body.style.animation = 'mysticalTransform 5s ease-in-out';
                createGlobalParticleEffect();
                
                setTimeout(() => {
                    alert('✧ THE GRAND MYSTERY HAS BEEN UNLOCKED ✧\nYou have found the hidden path, initiate.');
                    document.body.style.animation = 'none';
                }, 2500);
                
                konamiCode = [];
            }
        });

        // Add mystical transform animation
        const mysticalTransformStyle = document.createElement('style');
        mysticalTransformStyle.textContent = `
            @keyframes mysticalTransform {
                0%, 100% { filter: none; }
                25% { filter: hue-rotate(90deg) brightness(1.2); }
                50% { filter: hue-rotate(180deg) brightness(1.5) saturate(2); }
                75% { filter: hue-rotate(270deg) brightness(1.2); }
            }
        `;
        document.head.appendChild(mysticalTransformStyle);

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createMysticalBackground();
            initializeCipherWheel();
            initializeSymbolDecoder();
        });

        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe sections for scroll animations
        document.querySelectorAll('section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'all 0.8s ease';
            observer.observe(section);
        });

        // Random mystical events
        setInterval(() => {
            if (Math.random() > 0.95) {
                const randomSymbol = document.createElement('div');
                randomSymbol.textContent = ['✧', '⚹', '◊', '△', '☩'][Math.floor(Math.random() * 5)];
                randomSymbol.style.position = 'fixed';
                randomSymbol.style.top = Math.random() * 100 + 'vh';
                randomSymbol.style.right = '-50px';
                randomSymbol.style.color = 'var(--primary-gold)';
                randomSymbol.style.fontSize = '2rem';
                randomSymbol.style.opacity = '0.6';
                randomSymbol.style.pointerEvents = 'none';
                randomSymbol.style.zIndex = '1';
                randomSymbol.style.animation = 'driftLeft 10s linear forwards';
                
                document.body.appendChild(randomSymbol);
                
                setTimeout(() => {
                    if (document.body.contains(randomSymbol)) {
                        document.body.removeChild(randomSymbol);
                    }
                }, 10000);
            }
        }, 3000);

        // Add drift animation
        const driftStyle = document.createElement('style');
        driftStyle.textContent = `
            @keyframes driftLeft {
                from { 
                    transform: translateX(0) rotate(0deg); 
                    opacity: 0.6; 
                }
                to { 
                    transform: translateX(-100vw) rotate(360deg); 
                    opacity: 0; 
                }
            }
        `;
        document.head.appendChild(driftStyle);
    </script>
</body>
</html>